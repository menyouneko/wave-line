/*
 * wavy-svg v1.1.0
 * (c) 2019 Menyou
 * Released under the MIT License.
 */
"use strict";function __$styleInject(t){if(t&&"undefined"!=typeof window){var e=document.createElement("style");return e.setAttribute("media","screen"),e.innerHTML=t,document.head.appendChild(e),t}}function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function _defineProperties(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _defineProperty(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function creatSvgPath(t){for(var e=t.width,n=t.height,r=t.curve,a=0,i=n/2,o="M0,".concat(i," "),s=e/8;a<e;)o+="Q"+"".concat(a+s,",").concat(i+r," ").concat(a+2*s,",").concat(i," "),a+=2*s,r*=-1;return o+"L".concat(e,",0 ").concat(e,",").concat(n," 0,").concat(n)}var isDOM="object"===("undefined"==typeof HTMLElement?"undefined":_typeof(HTMLElement))?function(t){return t instanceof HTMLElement}:function(t){return t&&"object"===_typeof(t)&&1===t.nodeType&&"string"==typeof t.nodeName};function getClientSize(t){return{width:t.clientWidth,height:t.clientHeight}}function warn(t){}function hexToRgb(t){for(var e=[],n=t.length,r=parseInt((n-1)/3),a=1;a<n;a+=r)e.push(parseInt("0x"+t.slice(a,a+r)));return e}function getRGBValue(){var t=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/\s+/g,"").match(/^(?:rgb(?:a)?)\(([\d(\.\d*),]*)\)$/);return t?t[1].split(","):null}function getColorValue(t){var e=[];if(t.startsWith("rgb"))e=getRGBValue(t);else{if(!t.startsWith("#"))return null;e=hexToRgb(t)}return e.map(function(t){return Number(t)})}function getStepColor(t){var e=t.start,n=t.end,r=t.total,a=t.step;if(e===n)return e;var i=getColorValue(e),o=getColorValue(n);if(i&&o){var s=a/r,c=o[0]-i[0],l=o[1]-i[1],u=o[2]-i[2],d=(o[3]||1)-(i[3]||1);return"rgba(".concat(c*s+i[0],", ").concat(l*s+i[1],", ").concat(u+i[2],", ").concat(d*s+(i[3]||1),")")}return null}function createElementNS(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}var SVG_NAME="wave-svg",WRAP_CLASS="wavy-svg-wrap",STOP_CLASS="wavy-svg-stop",SVG_MAIN_CLASS="wavy-svg-container",SVG_BASE_CLASS="wavy-svg-container-base";__$styleInject(".wavy-svg-wrap {\n  position: relative;\n  overflow: hidden;\n  z-index: 0;\n}\n.wavy-svg-wrap.wavy-svg-stop .wavy-svg-container {\n  transform: scaleY(0.18);\n}\n.wavy-svg-container {\n  position: absolute;\n  transform-origin: 50% 100%;\n  transition: transform 1s ease;\n  transform: scaleY(1);\n}\n.wavy-svg-container svg {\n  animation-name: WavySvgSlideToLeft;\n  animation-iteration-count: infinite;\n  animation-timing-function: cubic-bezier(0.22, 0.33, 0.86, 0.76);\n  vertical-align: middle;\n}\n.wavy-svg-container-base {\n  position: absolute;\n  bottom: 0;\n  right: 0;\n  left: 0;\n}\n@keyframes WavySvgSlideToLeft {\n  0% {\n    transform: translateX(0);\n  }\n  100% {\n    transform: translateX(-50%);\n  }\n}\n");var id=1,defaultOptions={waveHeight:20,baseHeight:0,color:"transparent",delay:0,duration:2e3},WavySvg=function(){function t(e){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};_classCallCheck(this,t),_defineProperty(this,"status",1),_defineProperty(this,"wrap",null),_defineProperty(this,"size",{width:0,height:0}),_defineProperty(this,"initWrap",function(t){if(isDOM(t)){var e=getClientSize(t),r=e.width,a=e.height;n.wrap=createWrap(n.size={width:r,height:a})}else warn("el is not a HTMLElement")}),_defineProperty(this,"createWave",function(t){if(n.wrap)for(var e=0,r=t.length;e<r;e++){var a=n.size.width,i=void 0===a?0:a,o=Object.assign({width:i},defaultOptions,t[e]),s=o.baseHeight,c=o.waveHeight,l=o.color,u=o.endColor,d=o.curve;d||(o.curve=d=isNaN(c)?0:c/2),u||(o.endColor=u=l),o.middleColor=getStepColor({start:l,end:u,total:c+s,step:c});var p=createBase(o),f=createSvg(o);n.wrap.append(f),n.wrap.append(p),id++}}),e&&r?(this.initWrap(e),this.createWave(r instanceof Array?r:[r]),e.append(this.wrap)):warn("illegal parameters")}return _createClass(t,[{key:"run",value:function(){0===this.status&&(this.status=1,this.wrap.classList.remove(STOP_CLASS))}},{key:"stop",value:function(){1===this.status&&(this.status=0,this.wrap.classList.add(STOP_CLASS))}}]),t}();function createWrap(t){var e=t.width,n=void 0===e?0:e,r=t.height,a=void 0===r?0:r,i=document.createElement("div");return i.setAttribute("class",WRAP_CLASS),i.setAttribute("style","width: ".concat(n,"px;height: ").concat(a,"px;")),i}function createBase(t){var e=t.baseHeight,n=(t.color,t.endColor),r=t.middleColor,a=document.createElement("div");return a.setAttribute("class",SVG_BASE_CLASS),r&&n!==r&&(n="linear-gradient(to bottom, ".concat(r,", ").concat(n,")")),a.setAttribute("style","height: ".concat(e,"px;background:").concat(n,";z-index: ").concat(id)),a}function createSvg(t){var e=t.width,n=t.waveHeight,r=t.baseHeight,a=t.color,i=t.middleColor,o=t.curve,s=t.delay,c=t.duration,l="".concat(SVG_NAME,"-").concat(id),u=document.createElement("div");u.setAttribute("class",SVG_MAIN_CLASS),u.setAttribute("data-svg-name",l),u.setAttribute("style","bottom: ".concat(r,"px;z-index:").concat(id));var d=createElementNS("svg");d.setAttribute("width",2*e+"px"),d.setAttribute("height",n+"px"),d.setAttribute("style","animation-duration:".concat(c/1e3,"s;animation-delay:").concat(s/1e3,"s"));var p=createElementNS("defs"),f=createElementNS("linearGradient");f.setAttribute("id",l),f.setAttribute("x1","0"),f.setAttribute("y1","0"),f.setAttribute("x2","0"),f.setAttribute("y2","100%");var v=createElementNS("stop");v.setAttribute("offset","0"),v.setAttribute("stop-color",a);var h=createElementNS("stop");h.setAttribute("offset","100%"),h.setAttribute("stop-color",i||a);var g=createElementNS("path");return g.setAttribute("d",creatSvgPath({width:2*e,height:n,curve:o})),g.setAttribute("fill","url(#".concat(l,")")),f.appendChild(v),f.appendChild(h),p.appendChild(f),d.appendChild(p),d.appendChild(g),u.appendChild(d),u}module.exports=WavySvg;
